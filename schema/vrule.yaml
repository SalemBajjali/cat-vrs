$schema: http://json-schema.org/draft/2020-12/schema
title: GA4GH-Variation-Rule-Definitions
type: object
$defs:
  VariationRule:
    description: The abstract *Variation Rule* parent class. All attributes of this
      parent class are inherited by Variation Rule descendent classes.
    oneOf:
    - $ref: '#/$defs/SimpleVariationRule'
    - $ref: '#/$defs/ComplexVariationRule'
  SimpleVariationRule:
    description: The SimpleVariationRule abstract class represents the set of VariationRule
      classes that are used directly by genomic knowledge statements, or as components
      for defining a ComplexVariationRule.
    oneOf:
    - $ref: '#/$defs/LocatedMolecularConsequenceRule'
    - $ref: '#/$defs/EquivalentVariationRule'
    - $ref: '#/$defs/GeneFunctionalConsequenceRule'
  ComplexVariationRule:
    description: The ComplexVariationRule class creates objects for defining complex
      logical relationships between two or more other VariationRule objects.
    properties:
      type:
        type: string
        description: MUST be "ComplexVariationRule".
        enum:
        - ComplexVariationRule
      complement: &id001
        type: bool
        description: This field indicates whether the variation rule is defined to
          include (false) or exclude (true) variation concepts matching the rule.
          This is equivalent to a logical NOT operation on the variation rule expression.
      operands:
        type: array
        items:
          $ref: '#/$defs/VariationRule'
        minItems: 2
        description: The :ref:`VariationRule` objects that are being evaluated collectively.
      operator:
        type: string
        enum:
        - AND
        - OR
        description: The logical operation applied to evaluating the object *operands*.
    required:
    - complement
    - operands
    - operator
    - type
  LocatedMolecularConsequenceRule:
    description: A thing!
    properties:
      type: &id002
        type: string
        description: MUST be Variation Rule class name.
      complement: *id001
    required:
    - complement
    - type
  EquivalentVariationRule:
    description: The EquivalentVariationRule class constructs objects which indicate
      that any variation that can be "equivalently mapped" to the indicated *variation*
      value. The rules by which equivalency mapping is determined are managed at the
      implementation level, but typically involve operations such as variation projection
      (e.g. genomic <-> transcript <-> protein) and translation (e.g. GRCh37 genomic
      <-> GRCh38 genomic).
    properties:
      type:
        type: string
        enum:
        - EquivalentVariationRule
        description: MUST be "EquivalentVariationRule".
      complement: *id001
      variation:
        description: The `VRS Variation <https://vrs.ga4gh.org/en/1.2.0/terms_and_model.html#variation>`_
          object to which equivalency must be determined.
        $ref: https://raw.githubusercontent.com/ga4gh/vrs/1.2.0/schema/vrs.json#/definitions/Variation
      molecular_context:
        type: string
        enum:
        - genomic
        - transcript
        - protein
        description: The molecular context of the *variation* value.
    required:
    - complement
    - molecular_context
    - type
    - variation
  GeneFunctionalConsequenceRule:
    description: A thing!
    properties:
      type: *id002
      complement: *id001
    required:
    - complement
    - type
